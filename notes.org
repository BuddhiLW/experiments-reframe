#+title: Notes about Reitit/Pedestal/Datomic implementations

* Three main layers
- Routers.
- Middleware.
- Database.
* Coercion at =Reitit= level

#+begin_src clojure :eval no
(require '[clojure.pprint :as pprint])
(require '[reitit.core])
(require '[reitit.coercion])
(require '[reitit.coercion.spec])
(app {:request-method :get
      :uri "/v1/recipes/1234"})
(def router
  (reitit.core/router
   ["/v1/recipes/:recipe-id"
    {:coercion reitit.coercion.spec/coercion
     :parameters {:path {:recipe-id int?}}}]
   {:compile reitit.coercion/compile-request-coercers}))
(reitit.coercion/coerce!
 (reitit.core/match-by-path router "/v1/recipes/1234"))
;; => {:path {:recipe-id 1234}}
#+end_src
